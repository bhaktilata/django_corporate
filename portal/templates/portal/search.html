{% extends 'base.html' %}
{% load static %}
{% block title %}
    Maha Dev :: {{ block.super }}
{% endblock %}
 {% block css %}
<link rel="stylesheet" href="{% static 'css/style-starter.css' %}">
<link rel="stylesheet" href="{% static 'css/font-awesome.css' %}">
{% endblock %}
{% block content %}
<section class="w3l-blog-slider" id="blog-slider">
    <!-- main-slider -->
    <!-- //inner banner -->
<div class="w3l-grids-block-5">
        <div class="container py-md-5 py-4">
            <div class="title-main text-center mx-auto mb-md-5 mb-4" style="max-width:500px;">
                <p class="text-uppercase">поиск</p>
                <h3 class="title-style">Результаты поиска</h3>
            </div>
                   <div class="row">
            {% if posts %}
                {% for item in posts %}

            <div class="col-lg-4 col-md-6 item mt-md-0 mt-5">
                <div class="card">
                    <div class="card-header p-0 position-relative">
                           {% if item.photo %}
                                <a href="{{ item.get_absolute_url }}">
                                    <img class="card-img-bottom d-block radius-image-full" src="{{ item.photo.url }}" alt="{{ item.title }}">
                                </a>
                            {% else %}
                                <a href="{{ item.get_absolute_url }}"><img src="{% static 'images/c3.jpg' %}" alt="{{ post.title }}" class="img-fuild mr-3" style="width: 350px; float: left;"></a>
                            {% endif %}

                    </div>
                    <div class="card-body p-0 blog-details">
                        <a href="{{ item.get_absolute_url }}" class="blog-desc">{{ item.title_seo }}</a>

                        <p>{{ item.intro_text|safe|truncatechars_html:70 }}</p>
                        <p><span class="meta-value margin-top">
						<i class="fa fa-eye" aria-hidden="true"></i> {{ item.views }} :: <i class="fa fa-calendar" aria-hidden="true"></i> {{ item.created_at|date:"j E Y" }} </span></p>
                            <a href="{{ item.get_absolute_url }}" class="btn btn-style btn-empty p-0">Узнать больше<span></span></a>
                    </div>
                </div>
            </div>

                {% endfor %}
            {% else %}
                 <h2>В категории пока нет таких материалов</h2>
            {% endif %}
        </div>
                <!-- pagination -->
	<div class="pagination-wrapper mt-5">
     {% if page_obj.has_other_pages %} <!-- проверяет условие существования других страниц, кроме текущей -->
        <div class="pagination-style text-center mt-5">
                 <div class="pagination-wrapper mt-5 pt-lg-3 text-center">
                     <ul class="page-pagination">
                        {% if page_obj.has_previous %}
                            <li class="page-link">
							<a class="page-link" href="?{{ search }}page={{ page_obj.previous_page_number }}"><span class="fa fa-angle-double-left" aria-hidden="true"></span></a>
							</li>
                        {% endif %}

                        {% for p in page_obj.paginator.page_range %}              <!-- реализует перебор а диапазоне существующих страниц-->
                             {% if page_obj.number == p %}                         <!-- здесь p = номеру текущей страницы -->
                                 <li class="page-item active" aria-current="page">
								    <a  class="page-link" href="?{{ search }}page={{ p }}">{{ p }}</a>
								 </li>

                             {% elif p > page_obj.number|add:-3 and p < page_obj.number|add:3 %}
                                 <li class="page-item">
								     <a class="page-link" href="?{{ search }}page={{ p }}">{{ p }}</a>
								 </li>

                             {% endif %}
                        {% endfor %}
                        {% if page_obj.has_next %}
                            <li class="page-item">
							<a class="page-link" href="?{{ search }}page={{ page_obj.next_page_number }}"><span class="fa fa-angle-double-right" aria-hidden="true"></span></a>
							</li>
                        {% endif %}
                     </ul>
                </div>
        </div>
     {% endif %}
        </div>
		<!-- //pagination -->

 </div>
{% endblock %}

